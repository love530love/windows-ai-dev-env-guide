# 06 - æ•™å­¦éƒ¨ç½²ä¸å®éªŒç¯å¢ƒï¼šä¸€é”®åˆ†å‘ä¸å¤šæœºå¤ç°  

> æœ¬ç« å‚è€ƒï¼š  
> - [æ•™å­¦åˆ†äº«ç¯‡ï¼šåŸºäº Windows æœ¬åœ°æ¶æ„æ‰“é€  AI å®éªŒæ•™å­¦ç¯å¢ƒ](https://aicity.blog.csdn.net/article/details/148874083)  
> - [AI å…¨é“¾è·¯å¼€å‘ä½“ç³»ï¼šé¡¹ç›®æ¨¡æ¿ä¸æ•™å­¦éƒ¨ç½²](https://aicity.blog.csdn.net/article/details/149284845)  


## ä¸€ã€æ•™å­¦ç¯å¢ƒéœ€æ±‚åˆ†æ  

1. **é›¶é—¨æ§›ä¸Šæ‰‹**  
   æ–°å­¦å‘˜æ— éœ€æ‰‹åŠ¨é…ç½®å·¥å…·é“¾ï¼Œé€šè¿‡æ¨¡æ¿ä¸è„šæœ¬å³å¯å®Œæˆç¯å¢ƒæ­å»ºï¼Œèšç„¦å­¦ä¹ å†…å®¹è€Œéç¯å¢ƒè°ƒè¯•ã€‚  

2. **å¿«é€Ÿæ‰¹é‡éƒ¨ç½²**  
   æ”¯æŒå¤šè®¾å¤‡åŒæ—¶åˆ†å‘ï¼Œæ•™å¸ˆæ— éœ€é€æœºé…ç½®ï¼Œé€šè¿‡ç»Ÿä¸€æ¨¡æ¿ç¡®ä¿æ‰€æœ‰è®¾å¤‡ç¯å¢ƒä¸€è‡´ã€‚  

3. **å¯è¿ç§»å¯å¤ç°**  
   ç¯å¢ƒå¯å®Œæ•´æ‰“åŒ…ã€åˆ†å‘ã€æ¢å¤ï¼Œè§£å†³â€œå­¦å‘˜æœºå™¨è·‘ä¸é€šâ€çš„æ•™å­¦ç—›ç‚¹ã€‚  

4. **ç¦»çº¿æ”¯æŒ**  
   å†…ç½®ç¦»çº¿ä¾èµ–åŒ…ï¼Œé€‚é…æ— ç½‘ç»œæœºæˆ¿æˆ–æ ¡å›­ç¯å¢ƒï¼Œç¡®ä¿éƒ¨ç½²ä¸å—ç½‘ç»œé™åˆ¶ã€‚  


## äºŒã€æ•™å­¦æ¨¡æ¿ç»“æ„  

```tree
TeachingEnvTemplate/
â”œâ”€â”€ .venv/                           # é¢„æ„å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå«æ„å»ºå·¥å…·ä¸è¿è¡Œä¾èµ–ï¼‰
â”œâ”€â”€ offline_packages/                # ç¦»çº¿ä¾èµ–åŒ…ç¼“å­˜ï¼ˆæ”¯æŒæ— ç½‘ç»œå®‰è£…ï¼‰
â”œâ”€â”€ scripts/                         # è‡ªåŠ¨åŒ–è„šæœ¬é›†åˆ
â”‚   â”œâ”€â”€ deploy.ps1                   # ä¸€é”®éƒ¨ç½²ï¼šè§£å‹ã€é“¾æ¥ã€æ¿€æ´»ç¯å¢ƒ
â”‚   â”œâ”€â”€ update-env.ps1               # ç¯å¢ƒæ›´æ–°ï¼šæ›¿æ¢ä¾èµ–ã€é‡æ–°å®‰è£…
â”‚   â””â”€â”€ clean-env.ps1                # ç¯å¢ƒæ¸…ç†ï¼šåˆ é™¤ .venvã€æ¸…ç©ºç¼“å­˜
â”œâ”€â”€ docs/                            # æ•™å­¦æ–‡æ¡£
â”‚   â””â”€â”€ student-guide.md             # å­¦å‘˜æ“ä½œæ‰‹å†Œï¼ˆå«æ­¥éª¤å›¾è§£ï¼‰
â”œâ”€â”€ environment.yml                  # Conda ç¯å¢ƒå®šä¹‰ï¼ˆå¯é€‰ï¼Œå¤šç‰ˆæœ¬å…¼å®¹ï¼‰
â”œâ”€â”€ requirements.txt                 # pip ä¾èµ–é”å®šæ–‡ä»¶ï¼ˆç²¾ç¡®ç‰ˆæœ¬ï¼‰
â””â”€â”€ README.md                        # æ¨¡æ¿è¯´æ˜ä¸æ•™å¸ˆéƒ¨ç½²æŒ‡å—
```  


## ä¸‰ã€ä¸€é”®éƒ¨ç½²è„šæœ¬ç¤ºä¾‹  

```powershell
# scripts/deploy.ps1
param(
  [string]$TargetDir = (Get-Location)  # éƒ¨ç½²ç›®æ ‡è·¯å¾„ï¼Œé»˜è®¤å½“å‰ç›®å½•
)

Write-Host "`nå¼€å§‹éƒ¨ç½²æ•™å­¦ç¯å¢ƒåˆ°ï¼š$TargetDir`n"

# 1. è§£å‹æ¨¡æ¿åŒ…ï¼ˆå‡è®¾æ¨¡æ¿å‹ç¼©åŒ…ä¸º TeachingEnvTemplate.zipï¼‰
if (Test-Path ".\TeachingEnvTemplate.zip") {
  Expand-Archive -Path ".\TeachingEnvTemplate.zip" -DestinationPath $TargetDir -Force
  Write-Host "âœ… æ¨¡æ¿è§£å‹å®Œæˆ"
} else {
  Write-Error "âŒ æœªæ‰¾åˆ°æ¨¡æ¿æ–‡ä»¶ TeachingEnvTemplate.zipï¼Œè¯·ç¡®è®¤è·¯å¾„æ­£ç¡®"
  exit 1
}

# 2. åˆ›å»ºç¬¦å·é“¾æ¥ï¼ˆæ˜ å°„å¸¸ç”¨è·¯å¾„ï¼Œæ–¹ä¾¿å­¦å‘˜è®¿é—®ï¼‰
$linkPath = "$env:USERPROFILE\AI_Teaching_Env"
if (-not (Test-Path $linkPath)) {
  New-Item -ItemType SymbolicLink -Path $linkPath -Target "$TargetDir\TeachingEnvTemplate" | Out-Null
  Write-Host "âœ… å·²åˆ›å»ºå¿«æ·è®¿é—®ï¼š$linkPath"
}

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶éªŒè¯
$venvActivatePath = "$TargetDir\TeachingEnvTemplate\.venv\Scripts\activate.ps1"
if (Test-Path $venvActivatePath) {
  & $venvActivatePath
  Write-Host "`nâœ… è™šæ‹Ÿç¯å¢ƒæ¿€æ´»æˆåŠŸ"
  Write-Host "ğŸ“Œ Python ç‰ˆæœ¬ï¼š$(python --version 2>&1)"
} else {
  Write-Error "âŒ æœªæ‰¾åˆ°è™šæ‹Ÿç¯å¢ƒæ¿€æ´»è„šæœ¬ï¼Œè¯·æ£€æŸ¥ .venv ç›®å½•æ˜¯å¦å®Œæ•´"
  exit 1
}

Write-Host "`nğŸ‰ ç¯å¢ƒéƒ¨ç½²å®Œæˆï¼è¯·æŸ¥é˜… student-guide.md å¼€å§‹å®éªŒ`n"
```  


## å››ã€ç¦»çº¿ä¾èµ–ç®¡ç†  

### 4.1 æå‰æ‰“åŒ…ç¦»çº¿ä¾èµ–  
```powershell
# åœ¨æ•™å¸ˆæœºæ‰§è¡Œï¼šåŸºäº requirements.txt ä¸‹è½½æ‰€æœ‰ä¾èµ–åŒ…
cd TeachingEnvTemplate
pip download -r requirements.txt -d offline_packages/
Write-Host "âœ… ç¦»çº¿ä¾èµ–åŒ…å·²ä¿å­˜è‡³ offline_packages/"
```  


### 4.2 ç¦»çº¿æ›´æ–°ç¯å¢ƒ  
é€šè¿‡è„šæœ¬ä¸€é”®æ›´æ–°å­¦å‘˜ç¯å¢ƒï¼Œæ— éœ€é‡æ–°åˆ†å‘å®Œæ•´æ¨¡æ¿ï¼š  
```powershell
# å­¦å‘˜æœºæ‰§è¡Œï¼šæ›´æ–°ä¾èµ–ï¼ˆä½¿ç”¨æœ¬åœ°ç¦»çº¿åŒ…ï¼‰
.\scripts\update-env.ps1
```  

`update-env.ps1` æ ¸å¿ƒé€»è¾‘ï¼š  
```powershell
# æ¸…ç†æ—§ä¾èµ–ç¼“å­˜
Remove-Item -Path ".\offline_packages\*" -Recurse -Force -ErrorAction SilentlyContinue

# å¤åˆ¶æ–°ç¦»çº¿åŒ…ï¼ˆå‡è®¾æ•™å¸ˆæä¾›äº† updated_offline_packages ç›®å½•ï¼‰
Copy-Item -Path ".\updated_offline_packages\*" -Destination ".\offline_packages\" -Recurse -Force

# æ¿€æ´»ç¯å¢ƒå¹¶é‡æ–°å®‰è£…
.\.venv\Scripts\activate.ps1
pip install --no-index --find-links ./offline_packages -r requirements.txt
Write-Host "âœ… ç¯å¢ƒæ›´æ–°å®Œæˆ"
```  


## äº”ã€æ•™å­¦ä½¿ç”¨å…¨æµç¨‹  

### 5.1 æ•™å¸ˆå‡†å¤‡é˜¶æ®µ  
1. æ„å»ºåŸºç¡€æ¨¡æ¿ï¼ˆå« `.venv`ã€ç¦»çº¿åŒ…ã€è„šæœ¬ï¼‰ï¼›  
2. å‹ç¼©ä¸º `TeachingEnvTemplate.zip` å¹¶é™„åŠ  `student-guide.md`ï¼›  
3. åˆ†å‘è‡³å­¦å‘˜ï¼ˆUç›˜ã€å±€åŸŸç½‘å…±äº«æˆ–åœ¨çº¿ä¸‹è½½ï¼‰ã€‚  


### 5.2 å­¦å‘˜æ“ä½œæ­¥éª¤  
1. è§£å‹ `TeachingEnvTemplate.zip` åˆ°æœ¬åœ°ç›®å½•ï¼›  
2. åŒå‡» `scripts\deploy.ps1` è¿è¡Œéƒ¨ç½²è„šæœ¬ï¼ˆé¦–æ¬¡éœ€å…è®¸ PowerShell æ‰§è¡Œï¼‰ï¼›  
3. æ‰“å¼€ç”Ÿæˆçš„å¿«æ·è®¿é—®è·¯å¾„ `AI_Teaching_Env`ï¼›  
4. æŒ‰ç…§ `student-guide.md` ä¸­çš„æ­¥éª¤å¯åŠ¨å®éªŒï¼ˆå¦‚è¿è¡Œ `src/main.py` æˆ–è®­ç»ƒè„šæœ¬ï¼‰ã€‚  


### 5.3 ç¯å¢ƒç»´æŠ¤ä¸æ›´æ–°  
- æ•™å¸ˆæ›´æ–°ä¾èµ–åï¼Œä»…éœ€åˆ†å‘ `offline_packages` ç›®å½•å’Œ `update-env.ps1`ï¼›  
- å­¦å‘˜æ‰§è¡Œ `.\scripts\update-env.ps1` å³å¯åŒæ­¥æœ€æ–°ç¯å¢ƒã€‚  


## å…­ã€å¸¸è§é—®é¢˜ä¸è§£å†³  

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |  
|------|----------|  
| **è„šæœ¬è¢«é˜»æ­¢æ‰§è¡Œ** | å­¦å‘˜æœºç®¡ç†å‘˜æƒé™è¿è¡Œ PowerShellï¼Œæ‰§è¡Œï¼š`Set-ExecutionPolicy RemoteSigned -Scope CurrentUser`ï¼ˆé€‰æ‹© Y ç¡®è®¤ï¼‰ |  
| **ç¦»çº¿åŒ…ç¼ºå¤±ä¾èµ–** | æ•™å¸ˆæœºé‡æ–°æ‰§è¡Œ `pip download -r requirements.txt -d offline_packages/` ç”Ÿæˆå®Œæ•´åŒ… |  
| **è™šæ‹Ÿç¯å¢ƒæ¿€æ´»å¤±è´¥** | æ£€æŸ¥ `.venv` ç›®å½•æ˜¯å¦å®Œæ•´ï¼Œæˆ–é‡æ–°åˆ›å»ºï¼š`python -m venv .venv` |  


## ä¸ƒã€å°ç»“  

é€šè¿‡â€œæ¨¡æ¿æ ‡å‡†åŒ–+è„šæœ¬è‡ªåŠ¨åŒ–+ç¦»çº¿æœ¬åœ°åŒ–â€çš„ç»„åˆç­–ç•¥ï¼Œæœ¬æ–¹æ¡ˆå®ç°äº†æ•™å­¦ç¯å¢ƒçš„**é›¶é—¨æ§›åˆ†å‘ã€å¤šæœºä¸€è‡´å¤ç°ã€ç¦»çº¿ç¨³å®šè¿è¡Œ**ã€‚æ•™å¸ˆæ— éœ€é€æœºè°ƒè¯•ï¼Œå­¦å‘˜æ— éœ€æ‰‹åŠ¨é…ç½®ï¼Œå¤§å¹…é™ä½ AI å®éªŒæ•™å­¦çš„ç¯å¢ƒé—¨æ§›ï¼Œè®©ç²¾åŠ›èšç„¦äºæ ¸å¿ƒçŸ¥è¯†ä¼ æˆä¸å®éªŒå®è·µã€‚  

è¿™ç§æ¨¡å¼ä¸ä»…é€‚ç”¨äºè¯¾å ‚æ•™å­¦ï¼Œè¿˜å¯æ‰©å±•è‡³æ ¡å›­å®éªŒå®¤ã€ä¼ä¸šåŸ¹è®­ç­‰åœºæ™¯ï¼Œä¸º Windows å¹³å°ä¸‹çš„ AI æ•™å­¦æä¾›æ ‡å‡†åŒ–çš„ç¯å¢ƒæ²»ç†æ–¹æ¡ˆã€‚
